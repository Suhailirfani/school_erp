{% extends 'base.html' %}

{% block title %}Edit Staff - HOD Dashboard{% endblock %}



{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="page-title mb-0">Edit Staff</h1>
    <a href="{% url 'view_staff' %}" class="btn btn-outline-secondary">
        <i class="fas fa-arrow-left me-2"></i>Back to Staff List
    </a>
</div>

<div class="card border-0 shadow-sm">
    <div class="card-body p-4">
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}

            <div class="row mb-4">
                <div class="col-12 text-center mb-3">
                    {% if staff.admin.profile_pic %}
                    <img src="{{ staff.admin.profile_pic.url }}" alt="Profile" class="rounded-circle shadow"
                        style="width: 120px; height: 120px; object-fit: cover;">
                    {% else %}
                    <div class="rounded-circle shadow mx-auto d-flex justify-content-center align-items-center"
                        style="width: 120px; height: 120px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; font-size: 3rem;">
                        {{ staff.admin.first_name.0 }}{{ staff.admin.last_name.0 }}
                    </div>
                    {% endif %}
                </div>
            </div>

            <h5 class="gradient-text mb-4">Personal Information</h5>
            <div class="row g-3 mb-4">
                <div class="col-md-6">
                    <label class="form-label fw-bold">First Name <span class="text-danger">*</span></label>
                    <input type="text" name="first_name" class="form-control form-control-modern"
                        value="{{ staff.admin.first_name }}" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-bold">Last Name <span class="text-danger">*</span></label>
                    <input type="text" name="last_name" class="form-control form-control-modern"
                        value="{{ staff.admin.last_name }}" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-bold">Username <span class="text-danger">*</span></label>
                    <input type="text" name="username" class="form-control form-control-modern"
                        value="{{ staff.admin.username }}" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-bold">Email <span class="text-danger">*</span></label>
                    <input type="email" name="email" class="form-control form-control-modern"
                        value="{{ staff.admin.email }}" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-bold">Password</label>
                    <input type="password" name="password" class="form-control form-control-modern"
                        placeholder="Leave blank to keep current password">
                    <small class="text-muted">Only fill if you want to change the password</small>
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-bold">Gender <span class="text-danger">*</span></label>
                    <select name="gender" class="form-select form-control-modern" required>
                        <option value="">Select Gender</option>
                        <option value="Male" {% if staff.gender == 'Male' %}selected{% endif %}>Male</option>
                        <option value="Female" {% if staff.gender == 'Female' %}selected{% endif %}>Female</option>
                        <option value="Other" {% if staff.gender == 'Other' %}selected{% endif %}>Other</option>
                    </select>
                </div>
                <div class="col-12">
                    <label class="form-label fw-bold">Address <span class="text-danger">*</span></label>
                    <textarea name="address" class="form-control form-control-modern" rows="3"
                        required>{{ staff.address }}</textarea>
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-bold">Change Profile Picture</label>
                    <input type="file" name="profile_pic" class="form-control form-control-modern" accept="image/*">
                </div>
            </div>

            <div class="text-end mt-4">
                <button type="submit" class="btn btn-modern btn-gradient-success">
                    <i class="fas fa-save me-2"></i>Update Staff
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}